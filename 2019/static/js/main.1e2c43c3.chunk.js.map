{"version":3,"sources":["blocks/Calendar/colors.ts","blocks/Calendar/date.ts","blocks/Calendar/index.ts","blocks/Calendar/Day/Day.tsx","blocks/Calendar/DaysOfWeek/DaysOfWeek.tsx","blocks/Calendar/Legend/Legend.tsx","blocks/Calendar/Calendar.tsx","App.tsx","../events.js","serviceWorker.ts","index.tsx"],"names":["colors","iterateByDay","getDayOfWeekIndex","date","getDay","startDate","endDate","dateIterator","regenerator_default","a","wrap","_context","prev","next","Date","setDate","getDate","stop","_marked","getDayId","month","getMonth","day","getFullYear","join","eventTypes","BUSINESS_TRIP","VACATION","CONCERT","SUBBOTNIK","UNKNOWN","getEventType","origEvent","text","summary","description","toLowerCase","_i","_Object$values","Object","values","length","type","includes","getColor","eventTypesVals","indexOf","humanDateToJs","humanDate","defaultYear","_humanDate$split","split","_humanDate$split2","slicedToArray","year","cnCalendar","cn","getBackground","events","color","reduce","acc","event","idx","push","Day","_ref","isCurrent","isWeekend","isPassed","className","currentDate","hasEvents","react_default","createElement","current","otherMonth","meta","weekend","passed","tabIndex","style","background","undefined","map","react","key","location","url","filter","Boolean","val","weekDays","locale","arguments","toLocaleDateStringOpts","weekday","i","toLocaleDateString","getWeekDays","DaysOfWeek","dayOfWeek","Legend","filteredData","data","colorLegend","today","setHours","isTodayMarked","keys","eventStartStr","start","eventEndStr","end","shouldMarkToday","markToday","toString","Calendar","_Component","props","_this","eventsDescription","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","normalizedEvents","_event$split","_event$split2","toArray","interval","eventsData","slice","_interval$split","_interval$split2","_eventsData$join$spli","_eventsData$join$spli2","trim","parsedEvent","sort","b","intervalIterator","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","done","dayId","value","err","return","inherits","createClass","window","now","history","pushState","_this2","setFullYear","yearArr","weekIdx","monthIdx","dayOfWeekIdx","prevDate","buildYearArr","monthDate","setMonth","id","week","date1","date2","dayDate","currentEvents","Component","App","Calendar_Calendar_Calendar","hostname","match","ReactDOM","render","src_App","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.1e2c43c3.chunk.js","sourcesContent":["export const colors = [\n    '#E59942', 'rebeccapurple', '#649B5E',\n    '#49B851', '#14A0E7', '#A2EEFE', '#79B473'\n];\n","import { colors } from './colors';\n\n/**\n * Возвращает индекс дня недели, начиная с понедельника\n * @param date Date - дата, для которой необходимо вернуть индекс\n */\nfunction getDayOfWeekIndex(date: Date) {\n    return (date.getDay() + 6) % 7;\n}\n\n/**\n * Возвращает массив названий дней недели для заданной локали\n * По-умолчанию ['пн', 'вт', 'ср', 'чт', 'пт', 'сб', 'вс']\n * @param locale Локаль\n */\nexport function getWeekDays(locale = 'ru-Ru') {\n    const weekDays: string[] = [];\n    const toLocaleDateStringOpts = { weekday: 'short' };\n\n    const dateIterator = new Date();\n\n    for (let i = 0; i < 7; i++) {\n        dateIterator.setDate(dateIterator.getDate() + 1);\n        weekDays[getDayOfWeekIndex(dateIterator)] = dateIterator.toLocaleDateString(locale, toLocaleDateStringOpts);\n    }\n\n    return weekDays;\n};\n\n/**\n * Возвращает итератор по одному дню от startDate до endDate\n * @param startDate Date - дата начала\n * @param endDate Date — конечная дата\n */\nexport function *iterateByDay(startDate: Date, endDate: Date): IterableIterator<Date> {\n    const dateIterator = new Date(startDate);\n\n    while (dateIterator <= endDate) {\n        yield dateIterator;\n        dateIterator.setDate(dateIterator.getDate() + 1);\n    }\n}\n\n/**\n * Для переданной даты возвращает строку вида YYYYMMDD\n * @param date Date — дата\n */\nexport function getDayId(date: Date): string {\n    const month = date.getMonth();\n    const day = date.getDate();\n\n    return [\n        date.getFullYear(),\n        (month < 10 ? '0' : '') + month,\n        (day < 10 ? '0' : '') + day\n    ].join('');\n}\n\n/**\n * Проверяет, что две даты — это один и тот же день\n * @param date1 Date\n * @param date2 Date\n */\nexport function isSameDay(date1: Date, date2: Date): boolean {\n    return getDayId(date1) === getDayId(date2);\n}\n\nexport interface IDay {\n    date: Date;\n    meta?: IDayMeta;\n}\n\ninterface IDayMeta {\n    current?: boolean;\n    otherMonth?: boolean;\n}\n\n/**\n * Генерирует массив из 12 месяцев, содержащих массивы недель, содержащие массивы дней\n * @param year number - год, для которого необходимо сгенерировать массив\n */\nexport function buildYearArr(year?: number) {\n    if (!year) {\n        const now = new Date();\n        year = now.getFullYear();\n    }\n\n    const startDate = new Date(year, 0, 1); // 1st Jan of current year\n    const dateIterator = new Date(startDate);\n    const endDate = new Date(startDate);\n    endDate.setFullYear(startDate.getFullYear() + 1);\n\n    const yearArr : Array<Array<Array<IDay>>> = [];\n    let weekIdx = 0;\n\n    while (dateIterator < endDate) {\n        const monthIdx = dateIterator.getMonth();\n\n        if (!yearArr[monthIdx]) {\n            weekIdx = 0;\n            yearArr[monthIdx] = [];\n        }\n\n        const dayOfWeekIdx = getDayOfWeekIndex(dateIterator);\n\n        if (!yearArr[monthIdx][weekIdx]) {\n            yearArr[monthIdx][weekIdx] = [];\n\n            // when month starts not on monday\n            // keep the days of previous month\n            for (let i = 0; i < dayOfWeekIdx; i++) {\n                const prevDate = new Date(dateIterator);\n                prevDate.setDate(prevDate.getDate() - dayOfWeekIdx + i);\n\n                yearArr[monthIdx][weekIdx].push({\n                    date: prevDate,\n                    meta: {\n                        otherMonth: true\n                    }\n                });\n            }\n        }\n\n        yearArr[monthIdx][weekIdx][dayOfWeekIdx] = {\n            date: new Date(dateIterator)\n        };\n\n        if (getDayOfWeekIndex(dateIterator) === 6) {\n            weekIdx++;\n        }\n\n        dateIterator.setDate(dateIterator.getDate() + 1);\n    }\n\n    return yearArr;\n}\n\nexport interface IEvent {\n    start: Date;\n    end: Date;\n    summary?: string;\n    description?: string;\n    location?: string;\n    url?: string;\n    color: string;\n    type?: string;\n}\n\n// TODO: actualy the structure is never used as is anywhere yet\n// consider to simplify\nconst eventTypes = {\n    BUSINESS_TRIP: 'командировка',\n    VACATION: 'отпуск',\n    CONCERT: 'концерт',\n    SUBBOTNIK: 'субботник',\n    UNKNOWN: ''\n};\n\nfunction getEventType(origEvent: any) {\n    const text = (origEvent.summary + origEvent.description).toLowerCase();\n\n    for (const type of Object.values(eventTypes)) {\n        if (text.includes(type)) {\n            return type;\n        }\n    }\n\n    return eventTypes.UNKNOWN;\n}\n\nconst getColor = (function() {\n    const eventTypesVals = Object.values(eventTypes);\n\n    return function(origEvent: any): string {\n        return colors[eventTypesVals.indexOf(getEventType(origEvent))];\n    }\n})();\n\nexport function icalToInternalFormat(icalData: any[]): IEvent[] {\n    return icalData.reduce((acc: IEvent[], origEvent, idx): IEvent[] => {\n        if (origEvent.summary || origEvent.description) {\n            acc.push({\n                start: new Date(origEvent.start),\n                end: new Date(origEvent.end),\n                summary: origEvent.summary,\n                description: origEvent.description,\n                location: origEvent.location,\n                url: origEvent.url && origEvent.url.params.VALUE,\n                // TODO: not optimal\n                color: getColor(origEvent),\n                type: getEventType(origEvent)\n            });\n        }\n\n        return acc;\n    }, [])\n    .sort((a, b) => +a.start - +b.start); // TODO: check if it's really needed\n}\n\nexport type IEventsByDay = Record<string, IEvent[]>;\n\nexport function getEventsByDay(events: IEvent[]) {\n    return events.reduce((acc: IEventsByDay, event, idx) => {\n        const intervalIterator = iterateByDay(event.start, event.end);\n\n        for (let date of intervalIterator) {\n            const dayId = getDayId(date);\n\n            acc[dayId] || (acc[dayId] = []);\n\n            acc[dayId].push(event);\n        }\n\n        return acc;\n    }, {} as IEventsByDay);\n}\n\nfunction humanDateToJs(humanDate: string, defaultYear?: number) {\n    const [day, month, year] = humanDate.split('.');\n\n    return new Date(+year || defaultYear || new Date().getFullYear(), +month - 1, +day);\n}\n\nexport function parseHumanEvents(eventsDescription: string, defaultYear?: number): IEvent[] {\n    const events = eventsDescription.split('\\n');\n\n    return events.map(event => {\n        const [interval, ...eventsData] = event.split(/\\s/);\n        const [start, end] = interval.split('-');\n        const [summary, ...descriptionData] = eventsData.join(' ').split('.');\n        const description = descriptionData.join('.').trim();\n        const parsedEvent = {\n            start: humanDateToJs(start, defaultYear),\n            end: humanDateToJs(end || start, defaultYear),\n            summary,\n            description\n        } as IEvent;\n\n        parsedEvent.type = getEventType(parsedEvent);\n        parsedEvent.color = getColor(parsedEvent)\n\n        return parsedEvent;\n    })\n    .sort((a, b) => (+a.start - +b.start) + (+a.end - +b.end))\n}\n","import { cn } from '@bem-react/classname';\n\nexport const cnCalendar = cn('Calendar');\n","import React, { Fragment } from 'react';\nimport { IDay, IEvent } from '../date';\nimport { cnCalendar } from '..';\n\ninterface IDayProps {\n  day: IDay;\n  isCurrent: boolean;\n  events: IEvent[];\n  isWeekend: boolean;\n  isPassed: boolean;\n  className?: string;\n}\n\nfunction getBackground(events: IEvent[]): string {\n  if (events.length === 1) {\n    return events[0].color;\n  }\n  return 'linear-gradient(to bottom, ' +\n    events.reduce((acc: string[], event, idx) => {\n      acc.push(\n        event.color + ' ' + (idx * 100 / events.length) + '%',\n        event.color + ' ' + ((idx + 1) * 100 / events.length) + '%'\n      );\n\n      return acc;\n    }, []).join(', ') +\n    ')';\n}\n\nexport function Day({ day, isCurrent, isWeekend, isPassed, events, className }: IDayProps) {\n  const currentDate = day.date.getDate();\n  const hasEvents = events.length > 0;\n\n  return (\n    <td\n      className={cnCalendar('Day', {\n        current: isCurrent,\n        otherMonth: day.meta && day.meta.otherMonth,\n        weekend: isWeekend,\n        hasEvents: hasEvents,\n        passed: isPassed\n      }, [className])}\n      tabIndex={1}\n    >\n      <div\n        className={cnCalendar('DayText')}\n        style={hasEvents ?\n          { background: getBackground(events) } :\n          undefined\n        }\n      >\n        {currentDate}\n      </div>\n      {\n        hasEvents && (\n          <div className={cnCalendar('DayInfo')}>\n            {events.map((event, idx) => (\n              <Fragment key={idx}>\n                <h3 className={cnCalendar('DayInfoSummary')}>{event.summary}</h3>\n                <div className={cnCalendar('DayInfoDescription')}>\n                  {\n                    [\n                      event.description,\n                      event.location,\n                      event.url\n                    ]\n                      .filter(Boolean)\n                      .map((val, idx) => <p key={idx}>{val}</p>)\n                  }\n                </div>\n              </Fragment>\n            ))}\n          </div>\n        )\n      }\n    </td>\n  );\n}\n","import React from 'react';\n\nimport { cnCalendar } from '..';\nimport { getWeekDays } from '../date';\n\nconst weekDays = getWeekDays();\n\nexport function DaysOfWeek() {\n  return (\n    <tr className={cnCalendar('DaysOfWeek')}>\n      {\n        weekDays.map(dayOfWeek =>\n          <th key={dayOfWeek}>{dayOfWeek}</th>\n        )\n      }\n    </tr>\n  );\n}\n","import React from 'react';\n\nimport { cnCalendar } from '..';\nimport { IEvent } from '../date';\n\ninterface ILegendProps {\n  data: IEvent[];\n}\n\nexport function Legend({ data }: ILegendProps) {\n  const filteredData = data.filter(event => event.summary);\n\n  interface IColorLegend {\n    [key: string]: string;\n  }\n\n  const colorLegend = filteredData.reduce((acc: IColorLegend, event) => {\n    acc[event.color] = event.type || '???';\n\n    return acc;\n  }, {} as IColorLegend);\n\n  const today = new Date();\n  today.setHours(0, 0, 0, 0);\n  let isTodayMarked = false;\n\n  return (\n    <div className={cnCalendar('Legend')}>\n      <ul className={cnCalendar('LegendList')}>\n        {\n          Object.keys(colorLegend).map((color, idx) => (\n            <li\n              className={cnCalendar('LegendItem')}\n              style={{ color }}\n              key={idx}\n            >\n              <span className={cnCalendar('LegendItemText')}>{colorLegend[color]}</span>\n            </li>\n          ))\n        }\n      </ul>\n      <ul className={cnCalendar('LegendList')}>\n        {\n          filteredData.map((event, idx) => {\n            const eventStartStr = event.start.toLocaleDateString('ru-RU', { day: '2-digit', month: '2-digit' });\n            const eventEndStr = event.end.toLocaleDateString('ru-RU', { day: '2-digit', month: '2-digit' });\n            let shouldMarkToday = false;\n\n            if (!isTodayMarked && today < event.start) {\n              isTodayMarked = true;\n              shouldMarkToday = true;\n            }\n\n            return (<li\n              className={cnCalendar('LegendItem', {\n                passed: event.end < today,\n                markToday: shouldMarkToday\n              })}\n              style={{ color: event.color }}\n              key={event.start.toString() + idx}\n            >\n              <span className={cnCalendar('LegendItemText')}>\n                <strong>\n                  {\n                    eventStartStr !== eventEndStr ?\n                      [eventStartStr, eventEndStr].join('-') :\n                      eventStartStr\n                  }\n                </strong>\n                {' '}\n                {event.summary}\n              </span>\n            </li>)\n          })\n        }\n    </ul>\n    </div>\n  );\n}\n","import React, { Component } from 'react';\n\nimport {\n  buildYearArr,\n  getEventsByDay,\n  parseHumanEvents,\n  getDayId,\n  isSameDay,\n  IEvent,\n  IEventsByDay\n} from './date';\n\nimport { cnCalendar } from '.';\nimport './Calendar.css';\n\nimport { Day } from './Day/Day';\nimport { DaysOfWeek } from './DaysOfWeek/DaysOfWeek';\nimport { Legend } from './Legend/Legend';\n\ninterface ICalendarProps {\n  data: string;\n  year?: number;\n}\n\nexport class Calendar extends Component<ICalendarProps> {\n  constructor(props: ICalendarProps) {\n    super(props);\n\n    // TODO: это преобразование должно быть снаружи компонента\n    this.normalizedEvents = parseHumanEvents(this.props.data, this.props.year);\n    this.events = getEventsByDay(this.normalizedEvents);\n  }\n\n  private events: IEventsByDay;\n\n  private normalizedEvents: IEvent[];\n\n  componentDidMount() {\n    if (typeof window !== 'undefined') {\n      const now = new Date();\n      const today = new Date(now);\n      today.setHours(0, 0, 0, 0);\n\n      window.history.pushState(null, '', '#' + today.toLocaleDateString('en-US', { month: 'long' }));\n    }\n  }\n\n  render() {\n    const now = new Date();\n    const year = buildYearArr(this.props.year || now.getFullYear());\n    const today = new Date(now);\n    today.setHours(0, 0, 0, 0);\n\n    return (\n      <div className={cnCalendar()}>\n        <div className={cnCalendar('Year')}>\n          {\n            year.map((month, idx) => {\n              const monthDate = new Date();\n              monthDate.setMonth(idx);\n\n              return (\n                <div className={cnCalendar('Month')} key={idx}>\n                  <h2 className={cnCalendar('MonthName')} id={monthDate.toLocaleDateString('en-US', { month: 'long' })}>\n                    {monthDate.toLocaleDateString('ru-RU', { month: 'long' })}\n                  </h2>\n                  <table className={cnCalendar('MonthTable')}><tbody>\n                    <DaysOfWeek />\n                    {\n                      month.map((week, idx) => (\n                        <tr className={cnCalendar('Week')} key={idx}>\n                          {\n                            week.map((day, idx) => {\n                              const dayDate = day.date;\n                              const dayId = getDayId(dayDate);\n                              const currentEvents = this.events[dayId] || [];\n\n                              return (<Day\n                                day={day}\n                                isCurrent={isSameDay(dayDate, now)}\n                                isWeekend={idx > 4}\n                                events={currentEvents}\n                                isPassed={day.date < today}\n                                key={dayId}\n                              />);\n                            })\n                          }\n                        </tr>\n                      ))\n                    }\n                  </tbody></table>\n                </div>\n              );\n            })\n          }\n        </div>\n        <Legend data={this.normalizedEvents} />\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\n// import logo from './logo.svg';\nimport { Calendar } from './blocks/Calendar/Calendar';\n\nimport data from './events.js';\n\nclass App extends Component {\n  render() {\n    return (\n      <Calendar data={data} year={2019} />\n    );\n  }\n}\n\nexport default App;\n","export default \"\\n07.02-13.02 \\u041A\\u043E\\u043C\\u0430\\u043D\\u0434\\u0438\\u0440\\u043E\\u0432\\u043A\\u0430 \\u0432 \\u041C\\u043E\\u0441\\u043A\\u0432\\u0443\\n07.02 \\u042F love Frontend\\n11.02-12.02 \\u0422\\u0440\\u0435\\u043D\\u0438\\u043D\\u0433\\n21.02-26.02 \\u041A\\u043E\\u043C\\u0430\\u043D\\u0434\\u0438\\u0440\\u043E\\u0432\\u043A\\u0430 \\u0432 \\u041C\\u043E\\u0441\\u043A\\u0432\\u0443\\n22.02 \\u043F\\u042F\\u0422\\u042C\\u043D\\u0438\\u0446\\u0430, \\u0411\\u042D\\u041C\\u0430\\u043F\\n23.02-24.02 \\u0425\\u0430\\u043A\\u0430\\u0442\\u043E\\u043D\\n28.02-03.03 \\u041E\\u0442\\u043F\\u0443\\u0441\\u043A\\n\\n23.03 \\u0421\\u0443\\u0431\\u0431\\u043E\\u0442\\u0438\\u043A \\u0432 \\u0421\\u0438\\u043C\\u0444\\u0435\\u0440\\u043E\\u043F\\u043E\\u043B\\u0435\\n24.03-04.04 \\u041A\\u043E\\u043C\\u0430\\u043D\\u0434\\u0438\\u0440\\u043E\\u0432\\u043A\\u0430 \\u0432 \\u041C\\u043E\\u0441\\u043A\\u0432\\u0443. \\u041A\\u0430\\u043B\\u0438\\u0431\\u0440\\u043E\\u0432\\u043A\\u0438\\n\\n09.04-12.04 \\u041A\\u043E\\u043C\\u0430\\u043D\\u0434\\u0438\\u0440\\u043E\\u0432\\u043A\\u0430 \\u0432 \\u041C\\u043E\\u0441\\u043A\\u0432\\u0443\\n10.04-11.04 \\u0422\\u0440\\u0435\\u043D\\u0438\\u043D\\u0433\\n11.04 \\u0410\\u043A\\u0432\\u0430\\u0440\\u0438\\u0443\\u043C\\n19.04 \\u041C\\u0438\\u0442\\u0430\\u043F \\u0432 \\u0421\\u0438\\u043C\\u0444\\u0435\\u0440\\u043E\\u043F\\u043E\\u043B\\u0435 (?)\\n25.04-28.04 \\u041A\\u043E\\u043C\\u0430\\u043D\\u0434\\u0438\\u0440\\u043E\\u0432\\u043A\\u0430 \\u0432 \\u041C\\u043E\\u0441\\u043A\\u0432\\u0443\\n26.04 \\u0410\\u0443\\u043A\\u0446\\u042B\\u043E\\u043D\\n27.04 \\u0421\\u0443\\u0431\\u0431\\u043E\\u0442\\u043D\\u0438\\u043A \\u0432 \\u041C\\u043E\\u0441\\u043A\\u0432\\u0435\\n12.05-13.05 \\u041A\\u043E\\u043C\\u0430\\u043D\\u0434\\u0438\\u0440\\u043E\\u0432\\u043A\\u0430 \\u0432 \\u041C\\u043E\\u0441\\u043A\\u0432\\u0443\\n14.05-23.05 \\u041E\\u0442\\u043F\\u0443\\u0441\\u043A\\n16.05 Cluj-Napoca, \\u0420\\u0443\\u043C\\u044B\\u043D\\u0438\\u044F\\n24.05-27.05 \\u041A\\u043E\\u043C\\u0430\\u043D\\u0434\\u0438\\u0440\\u043E\\u0432\\u043A\\u0430 \\u0432 \\u041C\\u043E\\u0441\\u043A\\u0432\\u0443\\n24.05 \\u043F\\u042F\\u0422\\u042C\\u043D\\u0438\\u0446\\u0430, \\u0411\\u042D\\u041C\\u0430\\u043F\\n25.05-26.05 \\u0425\\u0430\\u043A\\u0430\\u0442\\u043E\\u043D\\n25.05 \\u041C\\u0438\\u0442\\u0430\\u043F \\u0432 \\u0421\\u0438\\u043C\\u0444\\u0435\\u0440\\u043E\\u043F\\u043E\\u043B\\u0435\\n28.05 \\u041B\\u0435\\u043A\\u0446\\u0438\\u044F \\u043F\\u0440\\u043E \\u0411\\u042D\\u041C \\u0432 \\u042F\\u0441\\u043B\\u044F\\u0445\\n29.05 \\u041B\\u0435\\u043A\\u0446\\u0438\\u044F \\u0432 \\u041F\\u0440\\u0430\\u043A\\u0442\\u0438\\u043A\\u0443\\u043C\\u0435\\n31.05-02.06 \\u041F\\u043E\\u0445\\u043E\\u0434\\n05.06-11.06 \\u041E\\u0442\\u043F\\u0443\\u0441\\u043A\\n06.06-08.06 \\u0420\\u0443\\u043C\\u044B\\u043D\\u0438\\u044F\\n12.06-19.06 \\u041A\\u043E\\u043C\\u0430\\u043D\\u0434\\u0438\\u0440\\u043E\\u0432\\u043A\\u0430 \\u0432 \\u041C\\u043E\\u0441\\u043A\\u0432\\u0443\\n13.06 \\u041B\\u0435\\u043A\\u0446\\u0438\\u044F \\u0432 \\u041F\\u0440\\u0430\\u043A\\u0442\\u0438\\u043A\\u0443\\u043C\\u0435\\n14.06 \\u0411\\u042D\\u041C\\u0430\\u043F \\u0432 \\u041C\\u043E\\u0441\\u043A\\u0432\\u0435 (react)\\n15.06 \\u041A\\u043E\\u043D\\u0446\\u0435\\u0440\\u0442 Muse\\n16.06 \\u041A\\u043E\\u043D\\u0446\\u0435\\u0440\\u0442 Disturbed\\n17.06-18.06 \\u0422\\u0440\\u0435\\u043D\\u0438\\u043D\\u0433\\n28.06-30.06 \\u041A\\u0430\\u044F\\u043A\\u0438\\n\\n10.07-20.07 \\u041A\\u043E\\u043C\\u0430\\u043D\\u0434\\u0438\\u0440\\u043E\\u0432\\u043A\\u0430 \\u0432 \\u0421\\u0430\\u043D\\u043A\\u0442-\\u041F\\u0435\\u0442\\u0435\\u0440\\u0431\\u0443\\u0440\\u0433\\n11.07 \\u041F\\u0440\\u0430\\u043A\\u0442\\u0438\\u043A\\u0443\\u043C, \\u043F\\u043E\\u0442\\u043E\\u043A 04, \\u041B\\u0435\\u043A\\u0446\\u0438\\u044F5 \\u0424\\u0430\\u0439\\u043B\\u043E\\u0432\\u0430\\u044F \\u0441\\u0442\\u0440\\u0443\\u043A\\u0442\\u0443\\u0440\\u0430 \\u0411\\u042D\\u041C\\n13.07 WSD \\u0432 \\u041F\\u0438\\u0442\\u0435\\u0440\\u0435\\n16.07 \\u041F\\u0440\\u0430\\u043A\\u0442\\u0438\\u043A\\u0443\\u043C, \\u043F\\u043E\\u0442\\u043E\\u043A 05, \\u041B\\u0435\\u043A\\u0446\\u0438\\u044F3 \\u0411\\u042D\\u041C\\n19.07 \\u0411\\u042D\\u041C\\u0430\\u043F \\u0432 \\u0421\\u0430\\u043D\\u043A\\u0442-\\u041F\\u0435\\u0442\\u0435\\u0440\\u0431\\u0443\\u0440\\u0433\\u0435\\n20.07 \\u0421\\u0443\\u0431\\u0431\\u043E\\u0442\\u043D\\u0438\\u043A \\u0432 \\u0421\\u0430\\u043D\\u043A\\u0442-\\u041F\\u0435\\u0442\\u0435\\u0440\\u0431\\u0443\\u0440\\u0433\\u0435\\n28.07-02.08 \\u041A\\u043E\\u043C\\u0430\\u043D\\u0434\\u0438\\u0440\\u043E\\u0432\\u043A\\u0430 \\u0432 \\u041C\\u043E\\u0441\\u043A\\u0432\\u0443\\n29.07 Rammstein \\u041C\\u043E\\u0441\\u043A\\u0432\\u0430\\n30.07 \\u041C\\u0438\\u0442\\u0430\\u043F \\u043F\\u0440\\u043E \\u0410\\u043B\\u0438\\u0441\\u0443 \\u0432 \\u0421\\u0430\\u043D\\u043A\\u0442-\\u041F\\u0435\\u0442\\u0435\\u0440\\u0431\\u0443\\u0440\\u0433\\u0435\\n\\n08.08 \\u041F\\u0440\\u0430\\u043A\\u0442\\u0438\\u043A\\u0443\\u043C\\n15.08-25.08 \\u041A\\u043E\\u043C\\u0430\\u043D\\u0434\\u0438\\u0440\\u043E\\u0432\\u043A\\u0430 \\u0432 \\u0421\\u0430\\u043D\\u043A\\u0442-\\u041F\\u0435\\u0442\\u0435\\u0440\\u0431\\u0443\\u0440\\u0433\\n16.08-18.08 \\u0424\\u0438\\u043D\\u043B\\u044F\\u043D\\u0434\\u0438\\u044F, \\u0425\\u0435\\u043B\\u044C\\u0441\\u0438\\u043D\\u043A\\u0438\\n24.08-25.08 \\u0425\\u0430\\u043A\\u0430\\u0442\\u043E\\u043D \\u0432 \\u0421\\u0430\\u043D\\u043A\\u0442-\\u041F\\u0435\\u0442\\u0435\\u0440\\u0431\\u0443\\u0440\\u0433\\u0435\\n26.08 \\u0417\\u0430\\u043F\\u0438\\u0441\\u044C \\u043B\\u0435\\u043A\\u0446\\u0438\\u0439 \\u0432 \\u041C\\u043E\\u0441\\u043A\\u0432\\u0435\\n26.08 \\u041A\\u043E\\u043C\\u0430\\u043D\\u0434\\u0438\\u0440\\u043E\\u0432\\u043A\\u0430 \\u0432 \\u041C\\u043E\\u0441\\u043A\\u0432\\u0443\\n\\n17.09-22.09 \\u041A\\u0438\\u0442\\u0430\\u0439\\n21.09 FEDAY, \\u041A\\u0438\\u0442\\u0430\\u0439\\n23.09-27.09 \\u0420\\u0435\\u0432\\u044C\\u044E (?)\\n\\n12.10 \\u0420\\u0430\\u0437\\u0431\\u043E\\u0440 \\u0434\\u043E\\u043C\\u0430\\u0448\\u043A\\u0438 \\u043F\\u043E React \\u0432 \\u0428\\u0420\\u0418\\n13.10-27.10 \\u041A\\u043E\\u043C\\u0430\\u043D\\u0434\\u0438\\u0440\\u043E\\u0432\\u043A\\u0430 \\u0432 \\u041C\\u043E\\u0441\\u043A\\u0432\\u0443\\n18.10-20.10 \\u0420\\u0443\\u043C\\u044B\\u043D\\u0438\\u044F, TechTalks Timisoara\\n23.10-25.10 \\u0422\\u0438\\u043C\\u0431\\u0438\\u043B\\u0434\\u0438\\u043D\\u0433\\n26.10 \\u0421\\u0443\\u0431\\u0431\\u043E\\u0442\\u043D\\u0438\\u043A \\u0432 \\u041C\\u043E\\u0441\\u043A\\u0432\\u0435\\n04.11 \\u0412\\u044B\\u0445\\u043E\\u0434\\u043D\\u043E\\u0439\\n12.11-18.11 \\u041A\\u043E\\u043C\\u0430\\u043D\\u0434\\u0438\\u0440\\u043E\\u0432\\u043A\\u0430 \\u0432 \\u041C\\u043E\\u0441\\u043A\\u0432\\u0443\\n15.11 \\u041D\\u0435\\u043A\\u043E\\u0440\\u0430\\u0431\\u043B\\u0438\\u043A \\u0432 \\u041C\\u043E\\u0441\\u043A\\u0432\\u0435\\n16.11-17.11 \\u0425\\u0430\\u043A\\u0430\\u0442\\u043E\\u043D\\n10.12-14.12 \\u041A\\u043E\\u043C\\u0430\\u043D\\u0434\\u0438\\u0440\\u043E\\u0432\\u043A\\u0430 \\u0432 \\u041C\\u043E\\u0441\\u043A\\u0432\\u0443, \\u041A\\u0430\\u0437\\u0430\\u043D\\u044C, \\u0418\\u043D\\u043D\\u043E\\u043F\\u043E\\u043B\\u0438\\u0441\\n12.12 \\u041C\\u0438\\u0442\\u0430\\u043F \\u0432 \\u041A\\u0430\\u0437\\u0430\\u043D\\u0438\\n\";","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}